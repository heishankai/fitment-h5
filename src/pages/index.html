<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebSocket 测试</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  </head>
  <body></body>
</html>

<script>
  const socket = io('http://localhost:3000/chat')

  socket.on('connect', () => {
    console.log('连接成功...')

    socket.emit('joinRoom', '李凯的房间')

    socket.on('message', (res) => {
      console.log('--message', res)
    })

    // 发送消息
    socket.emit('sendMsg', {
      room: '李凯的房间',
      message: '你好，我是李凯'
    })
  })

  socket.on('connect_error', (error) => {
    console.error('连接错误:', error)
  })

  //   // 发送测试消息
  //   socket.emit('findAllWst');
  //   socket.emit('findOneWst', 1);
</script>
